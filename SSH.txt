Основные шаги подключения по SSH

1) Генерация ключевой пары:
    Клиент генерирует ключевую пару: Обычно ключевая пара генерируется на стороне клиента. Команда для генерации ключевой пары на Linux или macOS выглядит следующим образом:

ssh-keygen -t rsa -b 4096 -C "your_email@example.com"

    Приватный ключ: Хранится на клиенте и защищен паролем (по желанию). Пример пути к приватному ключу: ~/.ssh/id_rsa.
    Публичный ключ: Хранится на сервере. Пример пути к публичному ключу: ~/.ssh/id_rsa.pub.

2) Копирование публичного ключа на сервер:

Публичный ключ должен быть скопирован на сервер и добавлен в файл ~/.ssh/authorized_keys для соответствующего пользователя. Команда для копирования ключа может выглядеть так:

ssh-copy-id user@server_ip

Либо можно вручную скопировать содержимое файла публичного ключа (~/.ssh/id_rsa.pub) и вставить его в файл ~/.ssh/authorized_keys на сервере.

3) Установка соединения:

Клиент устанавливает SSH-соединение с сервером, используя команду:

    ssh user@server_ip

    Сначала идет аутентификация на сервере: Сервер проверяет, есть ли соответствующий публичный ключ в файле ~/.ssh/authorized_keys. Если ключ найден, сервер отправляет клиенту вызов (challenge), зашифрованный с использованием публичного ключа.

    Затем идет аутентификация с использованием приватного ключа на клиенте:
    Клиент расшифровывает вызов с помощью своего приватного ключа и отправляет ответ обратно на сервер.
    Сервер проверяет ответ, чтобы убедиться, что он расшифрован правильно, что подтверждает владение приватным ключом.

    Роли ключей в процессе SSH

Приватный ключ: Хранится на клиенте и используется для расшифровки вызова, отправленного сервером. Он должен оставаться секретным и защищенным.
Публичный ключ: Хранится на сервере и используется для шифрования вызова, который отправляется клиенту. Он не требует защиты и может быть доступен публично.
